C4Context
    title C4 Context Diagram - Universal Entity Extraction Engine

    Person(endUsers, "End Users", "Discover entities (places, events, organizations) through web application")
    Person(developers, "Developers", "Configure new verticals using Lens contracts (YAML)")

    System_Boundary(engineBoundary, "Universal Entity Extraction Engine") {
        System(extractionEngine, "Entity Extraction Engine", "Domain-blind orchestration, ingestion, extraction, deduplication, merge, and persistence")
    }

    System_Ext(webApp, "Next.js Web Application", "User-facing discovery interface (Next.js 16, React 19, Tailwind CSS)")
    System_Ext(database, "Supabase PostgreSQL", "Entity storage with canonical dimensions (TEXT[]) and modules (JSONB)")
    System_Ext(llmProvider, "Anthropic Claude API", "Schema-bound structured extraction for unstructured data")

    System_Ext(serper, "Serper API", "Web search data source")
    System_Ext(googlePlaces, "Google Places API", "Location and business data")
    System_Ext(osm, "OpenStreetMap", "Crowdsourced geographic data")
    System_Ext(sportScotland, "Sport Scotland API", "Sports facility data")
    System_Ext(otherConnectors, "Other Data Sources", "Additional connectors (configurable via Lens routing)")

    Rel(endUsers, webApp, "Searches for entities", "HTTPS")
    Rel(webApp, extractionEngine, "Queries canonical entities", "Prisma ORM")
    Rel(extractionEngine, database, "Persists entities idempotently", "PostgreSQL protocol")

    Rel(extractionEngine, serper, "Fetches raw web data", "REST API")
    Rel(extractionEngine, googlePlaces, "Fetches place data", "REST API")
    Rel(extractionEngine, osm, "Fetches geographic data", "Overpass API")
    Rel(extractionEngine, sportScotland, "Fetches facility data", "REST API")
    Rel(extractionEngine, otherConnectors, "Fetches vertical-specific data", "Various protocols")

    Rel(extractionEngine, llmProvider, "Extracts structured data from unstructured text", "REST API (Instructor + Claude)")

    Rel(developers, extractionEngine, "Deploys Lens contracts (lens.yaml)", "YAML configuration")

    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")
