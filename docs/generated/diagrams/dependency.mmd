```mermaid
graph LR
    %% Backend (Engine) Module Dependencies
    subgraph Backend["Backend (Python Engine)"]
        direction TB

        %% Core Modules
        Orchestration["orchestration/"]
        Extraction["extraction/"]
        Ingestion["ingestion/"]
        Lenses["lenses/"]
        Schema["schema/"]
        Modules["modules/"]

        %% Sub-modules
        SchemaGen["schema/generators/"]
        Connectors["ingestion/connectors/"]
        Extractors["extraction/extractors/"]

        %% Dependencies
        Orchestration --> Lenses
        Orchestration --> Ingestion
        Orchestration --> Extraction
        Orchestration --> Schema

        Extraction --> Schema
        Extraction --> Lenses
        Extraction --> Modules

        Ingestion --> Connectors
        Ingestion --> Schema

        Lenses --> Schema
        Lenses --> Modules

        Schema --> SchemaGen

        Extractors --> Extraction
    end

    %% Schema Source (Outside Backend to show generation flow)
    ConfigSchemas["config/schemas/<br/>(YAML)"]

    %% Frontend (Web) Module Dependencies
    subgraph Frontend["Frontend (Next.js)"]
        direction TB

        %% Core Directories
        App["app/<br/>(App Router)"]
        Lib["lib/<br/>(utilities)"]
        Components["components/<br/>(UI)"]
        LibTypes["lib/types/generated/"]

        %% Dependencies
        App --> Lib
        App --> Components
        Components --> Lib
        Lib --> LibTypes
    end

    %% External Dependencies
    subgraph External["External Packages"]
        direction TB

        %% Backend External
        Pydantic["Pydantic<br/>(validation)"]
        PrismaPy["Prisma Client<br/>Python"]
        Instructor["Instructor<br/>(LLM)"]
        Anthropic["Anthropic SDK<br/>(Claude)"]
        Pytest["pytest<br/>(testing)"]

        %% Frontend External
        NextJS["Next.js 16<br/>(React 19)"]
        PrismaTS["Prisma Client<br/>TypeScript"]
        Tailwind["Tailwind CSS v4"]
        ShadcnUI["shadcn/ui<br/>(components)"]
    end

    %% Cross-Layer Dependencies
    subgraph Database["Database Layer"]
        PostgreSQL["PostgreSQL<br/>(Supabase)"]
        PrismaSchema["Prisma Schema<br/>(auto-generated)"]
    end

    %% Backend to External
    Schema --> Pydantic
    Extraction --> Instructor
    Extraction --> Anthropic
    Orchestration --> PrismaPy
    Extraction --> PrismaPy
    Ingestion --> PrismaPy

    %% Frontend to External
    App --> NextJS
    Components --> Tailwind
    Components --> ShadcnUI
    Lib --> PrismaTS

    %% Schema Generation Flow (YAML is source of truth)
    ConfigSchemas -->|generates| SchemaGen
    SchemaGen -->|generates| Schema
    SchemaGen -->|generates| PrismaSchema
    SchemaGen -->|generates| LibTypes

    %% Database Connections
    PrismaPy --> PostgreSQL
    PrismaTS --> PostgreSQL
    PrismaSchema --> PostgreSQL

    %% Styling
    classDef backendModule fill:#e1f5ff,stroke:#0077cc,stroke-width:2px
    classDef frontendModule fill:#fff4e1,stroke:#ff8800,stroke-width:2px
    classDef externalPkg fill:#f0f0f0,stroke:#666,stroke-width:1px
    classDef dbLayer fill:#e8f5e9,stroke:#4caf50,stroke-width:2px
    classDef schemaFlow fill:#fff9c4,stroke:#fbc02d,stroke-width:2px

    class Orchestration,Extraction,Ingestion,Lenses,Schema,Modules,SchemaGen,Connectors,Extractors backendModule
    class App,Lib,Components,LibTypes frontendModule
    class Pydantic,PrismaPy,Instructor,Anthropic,Pytest,NextJS,PrismaTS,Tailwind,ShadcnUI externalPkg
    class PostgreSQL,PrismaSchema dbLayer
    class ConfigSchemas schemaFlow
```
