Phase 3: Classifier Purity Validation - 2026-01-29
===================================================

GOAL: Enforce engine purity (system-vision.md Invariant 1)
Remove all domain-specific terms from classifier

VIOLATIONS IDENTIFIED (Pre-Refactoring):
-----------------------------------------
Total: 9 domain terms found
- padel, tennis, wine (docstring examples)
- league, club, retail, shop, business, chain (code logic)

REFACTORING CHANGES:
--------------------
1. is_organization_like function (lines 99-123)
   BEFORE: Category checks with domain terms
   AFTER: Structural-only rules
     - location_count > 1
     - employee_count > 0
     - is_franchise flag
     - Universal type == "organization"

2. extract_roles function (line 167)
   BEFORE: entity_type in {"retailer", "shop"}
   AFTER: Removed domain type checks, use sells_goods field only

3. Comments and docstrings
   BEFORE: Domain examples ("padel", "tennis", "club")
   AFTER: Generic examples ("activity_a", "Sport Activity Center")

VALIDATION RESULTS:
-------------------
✅ Purity test: PASSED (0 violations)
✅ All classifier tests: 6/6 PASSED
✅ Regression check: No broken functionality

STRUCTURAL CLASSIFICATION:
--------------------------
Engine now uses ONLY:
- Universal type indicators ("organization", "place", etc.)
- Structural signals (location_count, employee_count, is_franchise)
- Generic field names (provides_equipment, sells_goods)

NO domain-specific logic remains in classifier!

CONCLUSION:
-----------
✅ Phase 3 COMPLETE
✅ Engine purity enforced (Invariant 1)
✅ Classifier is vertical-agnostic
✅ All domain semantics moved to lens contracts

The classifier can now work across ANY vertical (sports, wine, restaurants, etc.)
without modification - only lens contracts change.
