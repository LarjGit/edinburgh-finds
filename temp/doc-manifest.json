{
  "version": "1.0",
  "limits": {
    "max_files_per_step": 20,
    "max_loc_per_step": 2000
  },
  "excludes": {
    "directories": [
      ".cache",
      ".git",
      ".prune-suite",
      "temp",
      ".turbo",
      ".parcel-cache",
      "env",
      ".claude",
      "docs",
      ".vscode",
      "dist",
      ".idea",
      ".obsidian",
      ".next",
      "out",
      "archive",
      "venv",
      "build",
      ".pytest_cache",
      "htmlcov",
      "node_modules",
      "__pycache__",
      ".doc-suite",
      ".venv"
    ],
    "patterns": [
      ".map",
      ".min.js",
      ".pyc",
      ".chunk.js"
    ]
  },
  "baseline": {
    "timestamp": "2026-01-25T14:45:00Z",
    "commit": "4966c4e9f8d3012fb895749d96cbe607ada4ca04"
  },
  "work_queue": [
    {
      "id": "infrastructure",
      "subsystem": "infrastructure",
      "files": [
        ".github/pull_request_template.md",
        ".github/workflows/tests.yml"
      ],
      "file_count": 2,
      "total_loc": 126,
      "output_path": "docs/architecture/subsystems/infrastructure.md",
      "status": "done"
    },
    {
      "id": "scripts",
      "subsystem": "scripts",
      "files": [
        "scripts/run_lens_aware_extraction.py",
        "scripts/validate_docs.py",
        "scripts/validate_wine_lens.py"
      ],
      "file_count": 3,
      "total_loc": 622,
      "output_path": "docs/architecture/subsystems/scripts.md",
      "status": "done"
    },
    {
      "id": "config",
      "subsystem": "config",
      "files": [
        "coverage.json",
        "pytest.ini"
      ],
      "file_count": 2,
      "total_loc": 4,
      "output_path": "docs/architecture/subsystems/config.md",
      "status": "done"
    },
    {
      "id": "engine-part1",
      "subsystem": "engine",
      "files": [
        "engine/check_data.py",
        "engine/config/README.md",
        "engine/config/entity_model.yaml",
        "engine/config/extraction.yaml",
        "engine/config/monitoring_alerts.yaml",
        "engine/config/schemas/entity.yaml",
        "engine/config/sources.yaml",
        "engine/config/sources.yaml.example",
        "engine/data/raw/edinburgh_council/20260114_facilities_1_9934d327.json",
        "engine/data/raw/google_places/20260113_places_6_1fb43bad.json",
        "engine/data/raw/google_places/20260113_places_7_34fc6a6a.json",
        "engine/data/raw/google_places/20260113_places_7_61c89275.json",
        "engine/data/raw/google_places/20260113_request_denied_0c617665.json",
        "engine/data/raw/google_places/20260114_places_0_44136fa3.json",
        "engine/data/raw/google_places/20260114_places_3_c1d5a29f.json",
        "engine/data/raw/google_places/20260114_places_7_ebf4b73c.json",
        "engine/data/raw/google_places/20260119_places_6_0ece5829.json",
        "engine/data/raw/open_charge_map/20260114_quarter_0812fcb4.json",
        "engine/data/raw/openstreetmap/20260113_elements_0_41137dea.json",
        "engine/data/raw/openstreetmap/20260113_elements_14046_1ad6bfb5.json"
      ],
      "file_count": 20,
      "total_loc": 125992,
      "output_path": "docs/architecture/subsystems/engine.md",
      "status": "done"
    },
    {
      "id": "engine-part2",
      "subsystem": "engine",
      "files": [
        "engine/data/raw/openstreetmap/20260113_elements_2957_65ebda29.json",
        "engine/data/raw/openstreetmap/20260113_elements_6350_0dc803af.json",
        "engine/data/raw/openstreetmap/20260114_elements_0_f97b976c.json",
        "engine/data/raw/serper/20260113_padel_edinburgh_1ba6e9d4.json",
        "engine/data/raw/serper/20260113_padel_edinburgh_26e41306.json",
        "engine/data/raw/serper/20260113_padel_edinburgh_a435756e.json",
        "engine/data/raw/serper/20260113_padel_edinburgh_test_db0ba2a2.json",
        "engine/data/raw/serper/20260114_test_query_7178bbd4.json",
        "engine/data/raw/serper/20260114_test_query_dd9f8fce.json",
        "engine/data/raw/serper/20260114_test_query_e73ca957.json",
        "engine/data/raw/sport_scotland/20260114_pub_sptk_187_181052fe.json",
        "engine/data/raw/sport_scotland/20260114_pub_sptk_187_88a4187f.json",
        "engine/extraction/__init__.py",
        "engine/extraction/attribute_splitter.py",
        "engine/extraction/base.py",
        "engine/extraction/cli.py",
        "engine/extraction/config.py",
        "engine/extraction/cost_report.py",
        "engine/extraction/deduplication.py",
        "engine/extraction/entity_classifier.py"
      ],
      "file_count": 20,
      "total_loc": 89047,
      "output_path": "docs/architecture/subsystems/engine.md",
      "status": "done"
    },
    {
      "id": "engine-part3",
      "subsystem": "engine",
      "files": [
        "engine/extraction/extractors/__init__.py",
        "engine/extraction/extractors/edinburgh_council_extractor.py",
        "engine/extraction/extractors/google_places_extractor.py",
        "engine/extraction/extractors/open_charge_map_extractor.py",
        "engine/extraction/extractors/osm_extractor.py",
        "engine/extraction/extractors/serper_extractor.py",
        "engine/extraction/extractors/sport_scotland_extractor.py",
        "engine/extraction/health.py",
        "engine/extraction/health_check.py",
        "engine/extraction/llm_cache.py",
        "engine/extraction/llm_client.py",
        "engine/extraction/llm_cost.py",
        "engine/extraction/logging_config.py",
        "engine/extraction/merging.py",
        "engine/extraction/prompts/extraction_base.txt",
        "engine/extraction/prompts/osm_extraction.txt",
        "engine/extraction/prompts/serper_extraction.txt",
        "engine/extraction/quarantine.py",
        "engine/extraction/run.py",
        "engine/extraction/run_all.py"
      ],
      "file_count": 20,
      "total_loc": 5967,
      "output_path": "docs/architecture/subsystems/engine.md",
      "status": "done"
    },
    {
      "id": "engine-part4",
      "subsystem": "engine",
      "files": [
        "engine/extraction/schema_utils.py",
        "engine/extraction/utils/__init__.py",
        "engine/extraction/utils/category_mapper.py",
        "engine/extraction/utils/opening_hours.py",
        "engine/extraction/utils/summary_synthesis.py",
        "engine/ingest.py",
        "engine/ingestion/CLI_README.md",
        "engine/ingestion/README.md",
        "engine/ingestion/__init__.py",
        "engine/ingestion/base.py",
        "engine/ingestion/cli.py",
        "engine/ingestion/connectors/__init__.py",
        "engine/ingestion/connectors/edinburgh_council.py",
        "engine/ingestion/connectors/google_places.py",
        "engine/ingestion/connectors/open_charge_map.py",
        "engine/ingestion/connectors/open_street_map.py",
        "engine/ingestion/connectors/serper.py",
        "engine/ingestion/connectors/sport_scotland.py",
        "engine/ingestion/deduplication.py",
        "engine/ingestion/health_check.py"
      ],
      "file_count": 20,
      "total_loc": 4533,
      "output_path": "docs/architecture/subsystems/engine.md",
      "status": "done"
    },
    {
      "id": "engine-part5",
      "subsystem": "engine",
      "files": [
        "engine/ingestion/logging_config.py",
        "engine/ingestion/rate_limiting.py",
        "engine/ingestion/retry_logic.py",
        "engine/ingestion/run_google_places.py",
        "engine/ingestion/run_osm.py",
        "engine/ingestion/run_serper.py",
        "engine/ingestion/storage.py",
        "engine/ingestion/summary_report.py",
        "engine/inspect_db.py",
        "engine/lenses/__init__.py",
        "engine/lenses/loader.py",
        "engine/lenses/ops.py",
        "engine/lenses/validator.py",
        "engine/logs/ingestion.log",
        "engine/modules/__init__.py",
        "engine/modules/validator.py",
        "engine/nul",
        "engine/orchestration/__init__.py",
        "engine/orchestration/conditions.py",
        "engine/orchestration/conditions_test.py"
      ],
      "file_count": 20,
      "total_loc": 3423,
      "output_path": "docs/architecture/subsystems/engine.md",
      "status": "done"
    },
    {
      "id": "engine-part6",
      "subsystem": "engine",
      "files": [
        "engine/orchestration/execution_context.py",
        "engine/orchestration/execution_context_test.py",
        "engine/orchestration/execution_plan.py",
        "engine/orchestration/execution_plan_test.py",
        "engine/orchestration/orchestrator.py",
        "engine/orchestration/orchestrator_test.py",
        "engine/orchestration/query_features.py",
        "engine/orchestration/query_features_test.py",
        "engine/orchestration/types.py",
        "engine/orchestration/types_test.py",
        "engine/prisma.config.ts",
        "engine/requirements.txt",
        "engine/run_osm_comprehensive.py",
        "engine/run_osm_manual.py",
        "engine/run_seed.py",
        "engine/scripts/README.md",
        "engine/scripts/run_edinburgh_council_connector.py",
        "engine/scripts/run_google_places_connector.py",
        "engine/scripts/run_open_charge_map_connector.py",
        "engine/scripts/run_serper_connector.py"
      ],
      "file_count": 20,
      "total_loc": 4605,
      "output_path": "docs/architecture/subsystems/engine.md",
      "status": "done"
    },
    {
      "id": "engine-part7",
      "subsystem": "engine",
      "files": [
        "engine/scripts/run_sport_scotland_connector.py",
        "engine/seed_data.py",
        "engine/test.db",
        "engine/tmpclaude-8651-cwd",
        "tests/engine/config/test_entity_model_purity.py",
        "tests/engine/test_lens_membership.py",
        "tests/engine/test_purity.py"
      ],
      "file_count": 7,
      "total_loc": 947,
      "output_path": "docs/architecture/subsystems/engine.md",
      "status": "done"
    },
    {
      "id": "frontend",
      "subsystem": "frontend",
      "files": [
        "web/app/globals.css",
        "web/app/layout.tsx",
        "web/app/page.tsx",
        "web/components.json",
        "web/lib/entity-helpers.ts",
        "web/lib/entity-queries.ts",
        "web/lib/lens-query.test.ts",
        "web/lib/lens-query.ts",
        "web/lib/prisma.ts",
        "web/lib/types-test.ts",
        "web/lib/utils.test.ts",
        "web/lib/utils.ts",
        "web/next-env.d.ts",
        "web/next.config.ts",
        "web/package-lock.json",
        "web/package.json",
        "web/prisma.config.ts",
        "web/tsconfig.json",
        "web/types/index.ts"
      ],
      "file_count": 19,
      "total_loc": 9638,
      "output_path": "docs/architecture/subsystems/frontend.md",
      "status": "done"
    },
    {
      "id": "tests",
      "subsystem": "tests",
      "files": [
        "scripts/test_wine_extraction.py",
        "tests/lenses/__init__.py",
        "tests/lenses/test_edinburgh_finds_lens.py",
        "tests/lenses/test_lens_processing.py",
        "tests/lenses/test_loader.py",
        "tests/lenses/test_validator.py",
        "tests/lenses/test_wine_discovery_lens.py",
        "tests/migration/__init__.py",
        "tests/migration/test_migrate_listing_to_entity.py",
        "tests/modules/__init__.py",
        "tests/modules/test_composition.py",
        "tests/query/__init__.py",
        "tests/query/test_prisma_array_filters.py"
      ],
      "file_count": 13,
      "total_loc": 2676,
      "output_path": "docs/architecture/subsystems/tests.md",
      "status": "done"
    },
    {
      "id": "conductor",
      "subsystem": "conductor",
      "files": [
        "conductor/code_styleguides/python.md",
        "conductor/code_styleguides/react.md",
        "conductor/code_styleguides/typescript.md",
        "conductor/product-guidelines.md",
        "conductor/product.md",
        "conductor/setup_state.json",
        "conductor/tech-stack.md",
        "conductor/tracks.md",
        "conductor/workflow.md"
      ],
      "file_count": 9,
      "total_loc": 777,
      "output_path": "docs/architecture/subsystems/conductor.md",
      "status": "done"
    },
    {
      "id": "database-part1",
      "subsystem": "database",
      "files": [
        "engine/extraction/models/__init__.py",
        "engine/extraction/models/entity_extraction.py",
        "engine/migrations/20260121220929_engine_purity_v1/migration.sql",
        "engine/migrations/migration_lock.toml",
        "engine/schema.prisma",
        "engine/schema/__main__.py",
        "engine/schema/cli.py",
        "engine/schema/core.py",
        "engine/schema/entity.py",
        "engine/schema/generate.py",
        "engine/schema/generator.py",
        "engine/schema/generators/__init__.py",
        "engine/schema/generators/prisma.py",
        "engine/schema/generators/pydantic_extraction.py",
        "engine/schema/generators/python_fieldspec.py",
        "engine/schema/generators/typescript.py",
        "engine/schema/parser.py",
        "engine/schema/types.py",
        "web/prisma/dev.db",
        "web/prisma/dev.db-journal"
      ],
      "file_count": 20,
      "total_loc": 3987,
      "output_path": "docs/architecture/subsystems/database.md",
      "status": "done"
    },
    {
      "id": "database-part2",
      "subsystem": "database",
      "files": [
        "web/prisma/migrations/20260121222822_engine_purity_v1/migration.sql",
        "web/prisma/migrations/migration_lock.toml",
        "web/prisma/migrations_sqlite_backup/20260111222311_init_comprehensive_schema/migration.sql",
        "web/prisma/migrations_sqlite_backup/20260112174128_init_generic_schema/migration.sql",
        "web/prisma/migrations_sqlite_backup/20260113015351_add_raw_ingestion_model/migration.sql",
        "web/prisma/migrations_sqlite_backup/20260114223935_add_listing_relationship/migration.sql",
        "web/prisma/migrations_sqlite_backup/20260115003157_entitytype_refactor/migration.sql",
        "web/prisma/migrations_sqlite_backup/20260115160306_add_extraction_models/migration.sql",
        "web/prisma/migrations_sqlite_backup/20260116232520_add_merge_conflict_model/migration.sql",
        "web/prisma/migrations_sqlite_backup/20260117201339_add_performance_indexes/migration.sql",
        "web/prisma/migrations_sqlite_backup/20260117201430_add_performance_indexes_v2/migration.sql",
        "web/prisma/migrations_sqlite_backup/20260118_add_dimension_gin_indexes/migration.sql",
        "web/prisma/migrations_sqlite_backup/migration_lock.toml",
        "web/prisma/schema.prisma"
      ],
      "file_count": 14,
      "total_loc": 963,
      "output_path": "docs/architecture/subsystems/database.md",
      "status": "done"
    },
    {
      "id": "docs-source",
      "subsystem": "docs-source",
      "files": [
        "DOC_SUITE_REVIEW.md",
        "DOC_SUITE_REVIEW_V2.md",
        "DOC_SUITE_REVIEW_V3.md",
        "web/README.md"
      ],
      "file_count": 4,
      "total_loc": 322,
      "output_path": "docs/architecture/subsystems/docs-source.md",
      "status": "done"
    },
    {
      "id": "lenses",
      "subsystem": "lenses",
      "files": [
        "lenses/edinburgh_finds/lens.yaml",
        "lenses/wine_discovery/lens.yaml"
      ],
      "file_count": 2,
      "total_loc": 1133,
      "output_path": "docs/architecture/subsystems/lenses.md",
      "status": "done"
    },
    {
      "id": "logs",
      "subsystem": "logs",
      "files": [
        "logs/unmapped_categories.log"
      ],
      "file_count": 1,
      "total_loc": 78,
      "output_path": "docs/architecture/subsystems/logs.md",
      "status": "done"
    },
    {
      "id": "root",
      "subsystem": "root",
      "files": [
        ".coverage",
        ".env",
        ".env.example",
        ".gitattributes",
        ".gitignore",
        "conftest.py",
        "nul"
      ],
      "file_count": 7,
      "total_loc": 171,
      "output_path": "docs/architecture/subsystems/root.md",
      "status": "done"
    },
    {
      "id": "web",
      "subsystem": "web",
      "files": [
        "web/.env",
        "web/.gitignore",
        "web/app/favicon.ico",
        "web/dev.db",
        "web/eslint.config.mjs",
        "web/postcss.config.mjs",
        "web/public/file.svg",
        "web/public/globe.svg",
        "web/public/next.svg",
        "web/public/vercel.svg",
        "web/public/window.svg"
      ],
      "file_count": 11,
      "total_loc": 432,
      "output_path": "docs/architecture/subsystems/web.md",
      "status": "done"
    }
  ],
  "outputs": [
    "docs/architecture/subsystems/infrastructure.md",
    "docs/architecture/subsystems/scripts.md",
    "docs/architecture/subsystems/config.md",
    "docs/architecture/subsystems/engine.md",
    "docs/architecture/subsystems/frontend.md",
    "docs/architecture/subsystems/tests.md",
    "docs/architecture/subsystems/conductor.md",
    "docs/architecture/subsystems/docs-source.md",
    "docs/architecture/subsystems/lenses.md",
    "docs/architecture/subsystems/root.md",
    "docs/architecture/subsystems/web.md",
    "docs/_index.md",
    "docs/architecture/overview.md",
    "docs/architecture/c4-context.md",
    "docs/architecture/c4-container.md",
    "docs/reference/api.md",
    "docs/reference/data-models.md",
    "docs/howto/development-setup.md",
    "docs/howto/testing.md",
    "docs/operations/troubleshooting.md",
    "docs/operations/maintenance.md"
  ]
}