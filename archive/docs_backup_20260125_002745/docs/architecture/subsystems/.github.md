# Subsystem: .github

## Purpose
This subsystem defines the GitHub configuration for the repository, including pull request templates and continuous integration (CI) workflows. It ensures code quality, architectural integrity (especially engine purity), and consistent testing practices.

## Components

### Pull Request Template
- `.github/pull_request_template.md`: A standardized template for pull requests. It includes a comprehensive "Architectural Validation Checklist" that enforces:
  - **Engine Purity:** Ensuring the core engine remains agnostic of specific business lenses.
  - **Lens Contract Validation:** Verifying that lens configurations (facets, values, mappings) are valid.
  - **Module Composition:** Checking for proper namespacing and structure in JSONB and YAML.
  - **Testing:** Confirming that standard and new tests pass.

### CI Workflows
- `.github/workflows/tests.yml`: The GitHub Actions workflow definition for running tests and checks.
  - **Triggers:** Pushes and pull requests to `main` and `develop` branches.
  - **Jobs:**
    - `engine-purity`: Runs `scripts/check_engine_purity.sh` to strictly enforce engine isolation rules.
    - `tests`: Sets up a Python 3.12 environment, installs dependencies, and runs various test suites:
      - Engine tests (with coverage)
      - Purity tests (`tests/engine/test_purity.py`)
      - Lens validation tests (`tests/lenses/test_validator.py`)
      - Deduplication tests (`tests/lenses/test_lens_processing.py`)
      - Prisma array filter tests (`tests/query/test_prisma_array_filters.py`)
      - Module composition tests (`tests/modules/test_composition.py`)

## Evidence
- Evidence: .github/pull_request_template.md:1-49 (PR template structure and checklist)
- Evidence: .github/workflows/tests.yml:1-58 (CI workflow jobs and steps)
